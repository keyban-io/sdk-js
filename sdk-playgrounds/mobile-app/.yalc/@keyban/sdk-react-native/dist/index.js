'use strict';

var react = require('react');
var sdkBase = require('@keyban/sdk-base');
var reactNativeReactBridge = require('react-native-react-bridge');
var Fe = require('react-native-webview');
var jsxRuntime = require('react/jsx-runtime');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var Fe__default = /*#__PURE__*/_interopDefault(Fe);

var fe=Object.create;var ot=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var ce=Object.getOwnPropertyNames;var he=Object.getPrototypeOf,de=Object.prototype.hasOwnProperty;var p=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var pe=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ce(t))!de.call(r,i)&&i!==e&&ot(r,i,{get:()=>t[i],enumerable:!(n=le(t,i))||n.enumerable});return r};var ye=(r,t,e)=>(e=r!=null?fe(he(r)):{},pe(!r||!r.__esModule?ot(e,"default",{value:r,enumerable:!0}):e,r));var ut=p((Re,st)=>{st.exports=me;function me(r,t){for(var e=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)e[n++]=arguments[i++];return new Promise(function(f,s){e[n]=function(c){if(o)if(o=!1,c)s(c);else {for(var m=new Array(arguments.length-1),_=0;_<m.length;)m[_++]=arguments[_];f.apply(null,m);}};try{r.apply(t||null,e);}catch(a){o&&(o=!1,s(a));}})}});var ct=p(lt=>{var R=lt;R.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&t.charAt(e)==="=";)++n;return Math.ceil(t.length*3)/4-n};var M=new Array(64),ft=new Array(123);for(v=0;v<64;)ft[M[v]=v<26?v+65:v<52?v+71:v<62?v-4:v-59|43]=v++;var v;R.encode=function(t,e,n){for(var i=null,o=[],u=0,f=0,s;e<n;){var a=t[e++];switch(f){case 0:o[u++]=M[a>>2],s=(a&3)<<4,f=1;break;case 1:o[u++]=M[s|a>>4],s=(a&15)<<2,f=2;break;case 2:o[u++]=M[s|a>>6],o[u++]=M[a&63],f=0;break}u>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),u=0);}return f&&(o[u++]=M[s],o[u++]=61,f===1&&(o[u++]=61)),i?(u&&i.push(String.fromCharCode.apply(String,o.slice(0,u))),i.join("")):String.fromCharCode.apply(String,o.slice(0,u))};var at="invalid encoding";R.decode=function(t,e,n){for(var i=n,o=0,u,f=0;f<t.length;){var s=t.charCodeAt(f++);if(s===61&&o>1)break;if((s=ft[s])===void 0)throw Error(at);switch(o){case 0:u=s,o=1;break;case 1:e[n++]=u<<2|(s&48)>>4,u=s,o=2;break;case 2:e[n++]=(u&15)<<4|(s&60)>>2,u=s,o=3;break;case 3:e[n++]=(u&3)<<6|s,o=0;break}}if(o===1)throw Error(at);return n-i};R.test=function(t){return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)};});var dt=p((Te,ht)=>{ht.exports=j;function j(){this._listeners={};}j.prototype.on=function(t,e,n){return (this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this};j.prototype.off=function(t,e){if(t===void 0)this._listeners={};else if(e===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===e?n.splice(i,1):++i;return this};j.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<e.length;)e[i].fn.apply(e[i++].ctx,n);}return this};});var bt=p((ze,_t)=>{_t.exports=pt(pt);function pt(r){return typeof Float32Array!="undefined"?function(){var t=new Float32Array([-0]),e=new Uint8Array(t.buffer),n=e[3]===128;function i(s,a,c){t[0]=s,a[c]=e[0],a[c+1]=e[1],a[c+2]=e[2],a[c+3]=e[3];}function o(s,a,c){t[0]=s,a[c]=e[3],a[c+1]=e[2],a[c+2]=e[1],a[c+3]=e[0];}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function u(s,a){return e[0]=s[a],e[1]=s[a+1],e[2]=s[a+2],e[3]=s[a+3],t[0]}function f(s,a){return e[3]=s[a],e[2]=s[a+1],e[1]=s[a+2],e[0]=s[a+3],t[0]}r.readFloatLE=n?u:f,r.readFloatBE=n?f:u;}():function(){function t(n,i,o,u){var f=i<0?1:0;if(f&&(i=-i),i===0)n(1/i>0?0:2147483648,o,u);else if(isNaN(i))n(2143289344,o,u);else if(i>34028234663852886e22)n((f<<31|2139095040)>>>0,o,u);else if(i<11754943508222875e-54)n((f<<31|Math.round(i/1401298464324817e-60))>>>0,o,u);else {var s=Math.floor(Math.log(i)/Math.LN2),a=Math.round(i*Math.pow(2,-s)*8388608)&8388607;n((f<<31|s+127<<23|a)>>>0,o,u);}}r.writeFloatLE=t.bind(null,yt),r.writeFloatBE=t.bind(null,mt);function e(n,i,o){var u=n(i,o),f=(u>>31)*2+1,s=u>>>23&255,a=u&8388607;return s===255?a?NaN:f*(1/0):s===0?f*1401298464324817e-60*a:f*Math.pow(2,s-150)*(a+8388608)}r.readFloatLE=e.bind(null,gt),r.readFloatBE=e.bind(null,wt);}(),typeof Float64Array!="undefined"?function(){var t=new Float64Array([-0]),e=new Uint8Array(t.buffer),n=e[7]===128;function i(s,a,c){t[0]=s,a[c]=e[0],a[c+1]=e[1],a[c+2]=e[2],a[c+3]=e[3],a[c+4]=e[4],a[c+5]=e[5],a[c+6]=e[6],a[c+7]=e[7];}function o(s,a,c){t[0]=s,a[c]=e[7],a[c+1]=e[6],a[c+2]=e[5],a[c+3]=e[4],a[c+4]=e[3],a[c+5]=e[2],a[c+6]=e[1],a[c+7]=e[0];}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function u(s,a){return e[0]=s[a],e[1]=s[a+1],e[2]=s[a+2],e[3]=s[a+3],e[4]=s[a+4],e[5]=s[a+5],e[6]=s[a+6],e[7]=s[a+7],t[0]}function f(s,a){return e[7]=s[a],e[6]=s[a+1],e[5]=s[a+2],e[4]=s[a+3],e[3]=s[a+4],e[2]=s[a+5],e[1]=s[a+6],e[0]=s[a+7],t[0]}r.readDoubleLE=n?u:f,r.readDoubleBE=n?f:u;}():function(){function t(n,i,o,u,f,s){var a=u<0?1:0;if(a&&(u=-u),u===0)n(0,f,s+i),n(1/u>0?0:2147483648,f,s+o);else if(isNaN(u))n(0,f,s+i),n(2146959360,f,s+o);else if(u>17976931348623157e292)n(0,f,s+i),n((a<<31|2146435072)>>>0,f,s+o);else {var c;if(u<22250738585072014e-324)c=u/5e-324,n(c>>>0,f,s+i),n((a<<31|c/4294967296)>>>0,f,s+o);else {var m=Math.floor(Math.log(u)/Math.LN2);m===1024&&(m=1023),c=u*Math.pow(2,-m),n(c*4503599627370496>>>0,f,s+i),n((a<<31|m+1023<<20|c*1048576&1048575)>>>0,f,s+o);}}}r.writeDoubleLE=t.bind(null,yt,0,4),r.writeDoubleBE=t.bind(null,mt,4,0);function e(n,i,o,u,f){var s=n(u,f+i),a=n(u,f+o),c=(a>>31)*2+1,m=a>>>20&2047,_=4294967296*(a&1048575)+s;return m===2047?_?NaN:c*(1/0):m===0?c*5e-324*_:c*Math.pow(2,m-1075)*(_+4503599627370496)}r.readDoubleLE=e.bind(null,gt,0,4),r.readDoubleBE=e.bind(null,wt,4,0);}(),r}function yt(r,t,e){t[e]=r&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24;}function mt(r,t,e){t[e]=r>>>24,t[e+1]=r>>>16&255,t[e+2]=r>>>8&255,t[e+3]=r&255;}function gt(r,t){return (r[t]|r[t+1]<<8|r[t+2]<<16|r[t+3]<<24)>>>0}function wt(r,t){return (r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3])>>>0}});var Et=p((exports,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var Bt=p(vt=>{var H=vt;H.length=function(t){for(var e=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320?(++i,e+=4):e+=3;return e};H.read=function(t,e,n){var i=n-e;if(i<1)return "";for(var o=null,u=[],f=0,s;e<n;)s=t[e++],s<128?u[f++]=s:s>191&&s<224?u[f++]=(s&31)<<6|t[e++]&63:s>239&&s<365?(s=((s&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,u[f++]=55296+(s>>10),u[f++]=56320+(s&1023)):u[f++]=(s&15)<<12|(t[e++]&63)<<6|t[e++]&63,f>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,u)),f=0);return o?(f&&o.push(String.fromCharCode.apply(String,u.slice(0,f))),o.join("")):String.fromCharCode.apply(String,u.slice(0,f))};H.write=function(t,e,n){for(var i=n,o,u,f=0;f<t.length;++f)o=t.charCodeAt(f),o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&((u=t.charCodeAt(f+1))&64512)===56320?(o=65536+((o&1023)<<10)+(u&1023),++f,e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128);return n-i};});var xt=p((He,At)=>{At.exports=ge;function ge(r,t,e){var n=e||8192,i=n>>>1,o=null,u=n;return function(s){if(s<1||s>i)return r(s);u+s>n&&(o=r(n),u=0);var a=t.call(o,u,u+=s);return u&7&&(u=(u|7)+1),a}}});var St=p((Ge,Ot)=>{Ot.exports=y;var k=C();function y(r,t){this.lo=r>>>0,this.hi=t>>>0;}var F=y.zero=new y(0,0);F.toNumber=function(){return 0};F.zzEncode=F.zzDecode=function(){return this};F.length=function(){return 1};var we=y.zeroHash="\0\0\0\0\0\0\0\0";y.fromNumber=function(t){if(t===0)return F;var e=t<0;e&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return e&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new y(n,i)};y.from=function(t){if(typeof t=="number")return y.fromNumber(t);if(k.isString(t))if(k.Long)t=k.Long.fromString(t);else return y.fromNumber(parseInt(t,10));return t.low||t.high?new y(t.low>>>0,t.high>>>0):F};y.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=~this.lo+1>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+n*4294967296)}return this.lo+this.hi*4294967296};y.prototype.toLong=function(t){return k.Long?new k.Long(this.lo|0,this.hi|0,!!t):{low:this.lo|0,high:this.hi|0,unsigned:!!t}};var S=String.prototype.charCodeAt;y.fromHash=function(t){return t===we?F:new y((S.call(t,0)|S.call(t,1)<<8|S.call(t,2)<<16|S.call(t,3)<<24)>>>0,(S.call(t,4)|S.call(t,5)<<8|S.call(t,6)<<16|S.call(t,7)<<24)>>>0)};y.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};y.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};y.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};y.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?e===0?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10};});var C=p(G=>{var l=G;l.asPromise=ut();l.base64=ct();l.EventEmitter=dt();l.float=bt();l.inquire=Et();l.utf8=Bt();l.pool=xt();l.LongBits=St();l.isNode=!!(typeof global!="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node);l.global=l.isNode&&global||typeof window!="undefined"&&window||typeof self!="undefined"&&self||G;l.emptyArray=Object.freeze?Object.freeze([]):[];l.emptyObject=Object.freeze?Object.freeze({}):{};l.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};l.isString=function(t){return typeof t=="string"||t instanceof String};l.isObject=function(t){return t&&typeof t=="object"};l.isset=l.isSet=function(t,e){var n=t[e];return n!=null&&t.hasOwnProperty(e)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};l.Buffer=function(){try{var r=l.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch(t){return null}}();l._Buffer_from=null;l._Buffer_allocUnsafe=null;l.newBuffer=function(t){return typeof t=="number"?l.Buffer?l._Buffer_allocUnsafe(t):new l.Array(t):l.Buffer?l._Buffer_from(t):typeof Uint8Array=="undefined"?t:new Uint8Array(t)};l.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;l.Long=l.global.dcodeIO&&l.global.dcodeIO.Long||l.global.Long||l.inquire("long");l.key2Re=/^true|false|0|1$/;l.key32Re=/^-?(?:0|[1-9][0-9]*)$/;l.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;l.longToHash=function(t){return t?l.LongBits.from(t).toHash():l.LongBits.zeroHash};l.longFromHash=function(t,e){var n=l.LongBits.fromHash(t);return l.Long?l.Long.fromBits(n.lo,n.hi,e):n.toNumber(!!e)};function Ct(r,t,e){for(var n=Object.keys(t),i=0;i<n.length;++i)(r[n[i]]===void 0||!e)&&(r[n[i]]=t[n[i]]);return r}l.merge=Ct;l.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function Dt(r){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Ct(this,n);}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}l.newError=Dt;l.ProtocolError=Dt("ProtocolError");l.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(e[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};l.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]];}};l.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};l._configure=function(){var r=l.Buffer;if(!r){l._Buffer_from=l._Buffer_allocUnsafe=null;return}l._Buffer_from=r.from!==Uint8Array.from&&r.from||function(e,n){return new r(e,n)},l._Buffer_allocUnsafe=r.allocUnsafe||function(e){return new r(e)};};});var X=p((Ke,Lt)=>{Lt.exports=h;var b=C(),J,T=b.LongBits,It=b.base64,Ft=b.utf8;function N(r,t,e){this.fn=r,this.len=t,this.next=void 0,this.val=e;}function U(){}function _e(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states;}function h(){this.len=0,this.head=new N(U,0,0),this.tail=this.head,this.states=null;}var qt=function(){return b.Buffer?function(){return (h.create=function(){return new J})()}:function(){return new h}};h.create=qt();h.alloc=function(t){return new b.Array(t)};b.Array!==Array&&(h.alloc=b.pool(h.alloc,b.Array.prototype.subarray));h.prototype._push=function(t,e,n){return this.tail=this.tail.next=new N(t,e,n),this.len+=e,this};function $(r,t,e){t[e]=r&255;}function be(r,t,e){for(;r>127;)t[e++]=r&127|128,r>>>=7;t[e]=r;}function V(r,t){this.len=r,this.next=void 0,this.val=t;}V.prototype=Object.create(N.prototype);V.prototype.fn=be;h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new V((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};h.prototype.int32=function(t){return t<0?this._push(Z,10,T.fromNumber(t)):this.uint32(t)};h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Z(r,t,e){for(;r.hi;)t[e++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)t[e++]=r.lo&127|128,r.lo=r.lo>>>7;t[e++]=r.lo;}h.prototype.uint64=function(t){var e=T.from(t);return this._push(Z,e.length(),e)};h.prototype.int64=h.prototype.uint64;h.prototype.sint64=function(t){var e=T.from(t).zzEncode();return this._push(Z,e.length(),e)};h.prototype.bool=function(t){return this._push($,1,t?1:0)};function K(r,t,e){t[e]=r&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24;}h.prototype.fixed32=function(t){return this._push(K,4,t>>>0)};h.prototype.sfixed32=h.prototype.fixed32;h.prototype.fixed64=function(t){var e=T.from(t);return this._push(K,4,e.lo)._push(K,4,e.hi)};h.prototype.sfixed64=h.prototype.fixed64;h.prototype.float=function(t){return this._push(b.float.writeFloatLE,4,t)};h.prototype.double=function(t){return this._push(b.float.writeDoubleLE,8,t)};var Ee=b.Array.prototype.set?function(t,e,n){e.set(t,n);}:function(t,e,n){for(var i=0;i<t.length;++i)e[n+i]=t[i];};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push($,1,0);if(b.isString(t)){var n=h.alloc(e=It.length(t));It.decode(t,n,0),t=n;}return this.uint32(e)._push(Ee,e,t)};h.prototype.string=function(t){var e=Ft.length(t);return e?this.uint32(e)._push(Ft.write,e,t):this._push($,1,0)};h.prototype.fork=function(){return this.states=new _e(this),this.head=this.tail=new N(U,0,0),this.len=0,this};h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new N(U,0,0),this.len=0),this};h.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this};h.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e};h._configure=function(r){J=r,h.create=qt(),J._configure();};});var Nt=p((Ue,kt)=>{kt.exports=x;var Mt=X();(x.prototype=Object.create(Mt.prototype)).constructor=x;var D=C();function x(){Mt.call(this);}x._configure=function(){x.alloc=D._Buffer_allocUnsafe,x.writeBytesBuffer=D.Buffer&&D.Buffer.prototype instanceof Uint8Array&&D.Buffer.prototype.set.name==="set"?function(t,e,n){e.set(t,n);}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var i=0;i<t.length;)e[n++]=t[i++];};};x.prototype.bytes=function(t){D.isString(t)&&(t=D._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(x.writeBytesBuffer,e,t),this};function ve(r,t,e){r.length<40?D.utf8.write(r,t,e):t.utf8Write?t.utf8Write(r,e):t.write(r,e);}x.prototype.string=function(t){var e=D.Buffer.byteLength(t);return this.uint32(e),e&&this._push(ve,e,t),this};x._configure();});var tt=p(($e,zt)=>{zt.exports=d;var B=C(),Y,jt=B.LongBits,Be=B.utf8;function A(r,t){return RangeError("index out of range: "+r.pos+" + "+(t||1)+" > "+r.len)}function d(r){this.buf=r,this.pos=0,this.len=r.length;}var Pt=typeof Uint8Array!="undefined"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new d(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new d(t);throw Error("illegal buffer")},Tt=function(){return B.Buffer?function(e){return (d.create=function(i){return B.Buffer.isBuffer(i)?new Y(i):Pt(i)})(e)}:Pt};d.create=Tt();d.prototype._slice=B.Array.prototype.subarray||B.Array.prototype.slice;d.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,A(this,10);return t}}();d.prototype.int32=function(){return this.uint32()|0};d.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Q(){var r=new jt(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0;}else {for(;t<3;++t){if(this.pos>=this.len)throw A(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw A(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}d.prototype.bool=function(){return this.uint32()!==0};function z(r,t){return (r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0}d.prototype.fixed32=function(){if(this.pos+4>this.len)throw A(this,4);return z(this.buf,this.pos+=4)};d.prototype.sfixed32=function(){if(this.pos+4>this.len)throw A(this,4);return z(this.buf,this.pos+=4)|0};function Rt(){if(this.pos+8>this.len)throw A(this,8);return new jt(z(this.buf,this.pos+=4),z(this.buf,this.pos+=4))}d.prototype.float=function(){if(this.pos+4>this.len)throw A(this,4);var t=B.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};d.prototype.double=function(){if(this.pos+8>this.len)throw A(this,4);var t=B.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};d.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw A(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,n);if(e===n){var i=B.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,n)};d.prototype.string=function(){var t=this.bytes();return Be.read(t,0,t.length)};d.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw A(this,t);this.pos+=t;}else do if(this.pos>=this.len)throw A(this);while(this.buf[this.pos++]&128);return this};d.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};d._configure=function(r){Y=r,d.create=Tt(),Y._configure();var t=B.Long?"toLong":"toNumber";B.merge(d.prototype,{int64:function(){return Q.call(this)[t](!1)},uint64:function(){return Q.call(this)[t](!0)},sint64:function(){return Q.call(this).zzDecode()[t](!1)},fixed64:function(){return Rt.call(this)[t](!0)},sfixed64:function(){return Rt.call(this)[t](!1)}});};});var Jt=p((Ve,Gt)=>{Gt.exports=q;var Ht=tt();(q.prototype=Object.create(Ht.prototype)).constructor=q;var Wt=C();function q(r){Ht.call(this,r);}q._configure=function(){Wt.Buffer&&(q.prototype._slice=Wt.Buffer.prototype.slice);};q.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};q._configure();});var Ut=p((Ze,Kt)=>{Kt.exports=P;var et=C();(P.prototype=Object.create(et.EventEmitter.prototype)).constructor=P;function P(r,t,e){if(typeof r!="function")throw TypeError("rpcImpl must be a function");et.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=!!t,this.responseDelimited=!!e;}P.prototype.rpcCall=function r(t,e,n,i,o){if(!i)throw TypeError("request must be specified");var u=this;if(!o)return et.asPromise(r,u,t,e,n,i);if(!u.rpcImpl){setTimeout(function(){o(Error("already ended"));},0);return}try{return u.rpcImpl(t,e[u.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(s,a){if(s)return u.emit("error",s,t),o(s);if(a===null){u.end(!0);return}if(!(a instanceof n))try{a=n[u.responseDelimited?"decodeDelimited":"decode"](a);}catch(c){return u.emit("error",c,t),o(c)}return u.emit("data",a,t),o(null,a)})}catch(f){u.emit("error",f,t),setTimeout(function(){o(f);},0);return}};P.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};});var Vt=p($t=>{var Ae=$t;Ae.Service=Ut();});var Xt=p((Qe,Zt)=>{Zt.exports={};});var te=p(Yt=>{var g=Yt;g.build="minimal";g.Writer=X();g.BufferWriter=Nt();g.Reader=tt();g.BufferReader=Jt();g.util=C();g.rpc=Vt();g.roots=Xt();g.configure=Qt;function Qt(){g.util._configure(),g.Writer._configure(g.BufferWriter),g.Reader._configure(g.BufferReader);}Qt();});var re=p((tr,ee)=>{ee.exports=te();});var ie=p((er,ne)=>{var I=re(),E=I.Reader,rt=I.Writer,O=I.util,w=I.roots.default||(I.roots.default={});w.EddsaAddRequest=function(){function r(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]]);}return r.prototype.num1=0,r.prototype.num2=0,r.create=function(e){return new r(e)},r.encode=function(e,n){return n||(n=rt.create()),n.uint32(16).uint32(e.num1),n.uint32(24).uint32(e.num2),n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof E||(e=E.create(e));for(var i=n===void 0?e.len:e.pos+n,o=new w.EddsaAddRequest;e.pos<i;){var u=e.uint32();switch(u>>>3){case 2:{o.num1=e.uint32();break}case 3:{o.num2=e.uint32();break}default:e.skipType(u&7);break}}if(!o.hasOwnProperty("num1"))throw O.ProtocolError("missing required 'num1'",{instance:o});if(!o.hasOwnProperty("num2"))throw O.ProtocolError("missing required 'num2'",{instance:o});return o},r.decodeDelimited=function(e){return e instanceof E||(e=new E(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":O.isInteger(e.num1)?O.isInteger(e.num2)?null:"num2: integer expected":"num1: integer expected"},r.fromObject=function(e){if(e instanceof w.EddsaAddRequest)return e;var n=new w.EddsaAddRequest;return e.num1!=null&&(n.num1=e.num1>>>0),e.num2!=null&&(n.num2=e.num2>>>0),n},r.toObject=function(e,n){n||(n={});var i={};return n.defaults&&(i.num1=0,i.num2=0),e.num1!=null&&e.hasOwnProperty("num1")&&(i.num1=e.num1),e.num2!=null&&e.hasOwnProperty("num2")&&(i.num2=e.num2),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/EddsaAddRequest"},r}();w.EddsaAddResponse=function(){function r(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]]);}return r.prototype.sum=0,r.create=function(e){return new r(e)},r.encode=function(e,n){return n||(n=rt.create()),n.uint32(16).uint32(e.sum),n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof E||(e=E.create(e));for(var i=n===void 0?e.len:e.pos+n,o=new w.EddsaAddResponse;e.pos<i;){var u=e.uint32();switch(u>>>3){case 2:{o.sum=e.uint32();break}default:e.skipType(u&7);break}}if(!o.hasOwnProperty("sum"))throw O.ProtocolError("missing required 'sum'",{instance:o});return o},r.decodeDelimited=function(e){return e instanceof E||(e=new E(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":O.isInteger(e.sum)?null:"sum: integer expected"},r.fromObject=function(e){if(e instanceof w.EddsaAddResponse)return e;var n=new w.EddsaAddResponse;return e.sum!=null&&(n.sum=e.sum>>>0),n},r.toObject=function(e,n){n||(n={});var i={};return n.defaults&&(i.sum=0),e.sum!=null&&e.hasOwnProperty("sum")&&(i.sum=e.sum),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/EddsaAddResponse"},r}();w.GenericMessage=function(){function r(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]]);}return r.prototype.callId="",r.prototype.payload="",r.create=function(e){return new r(e)},r.encode=function(e,n){return n||(n=rt.create()),n.uint32(10).string(e.callId),n.uint32(18).string(e.payload),n},r.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},r.decode=function(e,n){e instanceof E||(e=E.create(e));for(var i=n===void 0?e.len:e.pos+n,o=new w.GenericMessage;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.callId=e.string();break}case 2:{o.payload=e.string();break}default:e.skipType(u&7);break}}if(!o.hasOwnProperty("callId"))throw O.ProtocolError("missing required 'callId'",{instance:o});if(!o.hasOwnProperty("payload"))throw O.ProtocolError("missing required 'payload'",{instance:o});return o},r.decodeDelimited=function(e){return e instanceof E||(e=new E(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":O.isString(e.callId)?O.isString(e.payload)?null:"payload: string expected":"callId: string expected"},r.fromObject=function(e){if(e instanceof w.GenericMessage)return e;var n=new w.GenericMessage;return e.callId!=null&&(n.callId=String(e.callId)),e.payload!=null&&(n.payload=String(e.payload)),n},r.toObject=function(e,n){n||(n={});var i={};return n.defaults&&(i.callId="",i.payload=""),e.callId!=null&&e.hasOwnProperty("callId")&&(i.callId=e.callId),e.payload!=null&&e.hasOwnProperty("payload")&&(i.payload=e.payload),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,I.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenericMessage"},r}();ne.exports=w;});var L=ye(ie());var W=class{constructor(t){this.promiseMap=new Map;this.emitFn=null;this.signMessage=(t,e)=>Promise.resolve("");this.generateKeypair=()=>Promise.resolve("");this.promiseMap=new Map,this.emitFn=t;}async add(t,e){this.ensureEmitFn();let n=sdkBase.generateUUID(),i=L.EddsaAddRequest.encode({num1:t,num2:e}).finish(),o=await this.promisifyMessage(()=>{var f;(f=this.emitFn)==null||f.call(this,{type:"add",data:this.prepareGenericMessage(n,sdkBase.u8aToHex(i))});},n);return L.EddsaAddResponse.decode(sdkBase.hexToU8a(o)).sum}ensureEmitFn(){if(!this.emitFn)throw new Error("critical: missing emmit function");return !0}receiveMessage(t){let e=L.GenericMessage.decode(sdkBase.hexToU8a(t)),{callId:n,payload:i}=e,o=this.promiseMap.get(n);o&&(this.promiseMap.delete(n),o(i));}prepareGenericMessage(t,e){let n=L.GenericMessage.encode({callId:t,payload:e}).finish();return sdkBase.u8aToHex(n)}promisifyMessage(t,e){return new Promise((n,i)=>{t(),this.promiseMap.set(e,n),setTimeout(i,1e4);})}};var nt=react.createContext(null),cr=({children:r,storageProvider:t,webApp:e})=>{let n=react.useRef(null),i=react.useRef(null),[o,u]=react.useState(!1),{ref:f,onMessage:s,emit:a}=reactNativeReactBridge.useWebViewMessage(async m=>{var _,it;if(m.type==="initialized"){console.log("WebAssembly initialized inside WebView"),n.current=new W(a),i.current=new sdkBase.EddsaClient(n.current,{get:ae=>Promise.resolve("1"),save:(ae,ke)=>Promise.resolve(!0)}),await((_=i.current)==null?void 0:_.initialize()),u(!0);return}(it=n.current)==null||it.receiveMessage(m.data);}),c=react.useCallback((m,_)=>{if(!o||!i.current)throw new Error("NOT_INITIALIZED");return i.current.add(m,_)},[o]);return jsxRuntime.jsxs(nt.Provider,{value:{storageProvider:t,eddsaClient:i.current,wasmApi:n.current,initialized:o,add:c},children:[jsxRuntime.jsx(Fe__default.default,{ref:f,style:{display:"none"},webviewDebuggingEnabled:!0,cacheEnabled:!1,source:{html:e},onMessage:s}),r]})};var mr=()=>{let r=react.useContext(nt);if(!r)throw new Error("useKeyban hook must be used inside KeybanProvider");return r};

exports.KeybanEddsaContext = nt;
exports.KeybanEddsaProvider = cr;
exports.useKeybanEddsa = mr;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map