query walletBalance($walletId: String!) {
  wallet(id: $walletId) {
    id
    balance
  }
}

subscription walletSubscription($walletIds: [ID!], $mutation: [MutationType!]) {
  wallets(id: $walletIds, mutation: $mutation) {
    id
    _entity
  }
}

query walletTokenBalances($walletId: String!, $first: Int, $after: Cursor) {
  tokenBalances(
    filter: { wallet: { id: { equalTo: $walletId } } }
    first: $first
    after: $after
  ) {
    pageInfo {
      ...KeybanClient_PageInfo
    }
    totalCount
    edges {
      cursor
      node {
        id
        ...KeybanClient_TokenBalance
      }
    }
  }
}

subscription tokenBalancesSubscription(
  $tokenBalancesIds: [ID!]
  $mutation: [MutationType!]
) {
  tokenBalances(id: $tokenBalancesIds, mutation: $mutation) {
    id
    mutation_type
    _entity
  }
}

query walletNfts($walletId: String!, $first: Int, $after: Cursor) {
  nftBalances(
    filter: { wallet: { id: { equalTo: $walletId } } }
    first: $first
    after: $after
  ) {
    pageInfo {
      ...KeybanClient_PageInfo
    }
    totalCount
    edges {
      cursor
      node {
        id
        ...KeybanClient_NftBalance
      }
    }
  }
}

subscription nftBalancesSubscription(
  $nftBalanceIds: [ID!]
  $mutation: [MutationType!]
) {
  nftBalances(id: $nftBalanceIds, mutation: $mutation) {
    id
    mutation_type
    _entity
  }
}

query walletNft($nftBalanceId: String!) {
  nftBalance(id: $nftBalanceId) {
    id
    ...KeybanClient_NftBalance
  }
}

query walletAssetTransfers($walletId: String!, $first: Int, $after: Cursor) {
  assetTransfers(
    filter: {
      or: [
        { from: { id: { equalTo: $walletId } } }
        { to: { id: { equalTo: $walletId } } }
      ]
    }
    first: $first
    after: $after
    orderBy: BLOCK_NUMBER_DESC
  ) {
    pageInfo {
      ...KeybanClient_PageInfo
    }
    totalCount
    edges {
      cursor
      node {
        id
        ...KeybClient_AssetTransfer
      }
    }
  }
}

subscription assetTransfersSubscription(
  $assetTransferIds: [ID!]
  $mutation: [MutationType!]
) {
  assetTransfers(id: $assetTransferIds, mutation: $mutation) {
    id
    mutation_type
    _entity
  }
}

fragment KeybanClient_PageInfo on PageInfo {
  endCursor
  startCursor
  hasNextPage
  hasPreviousPage
}

fragment KeybanClient_TokenContract on TokenContract {
  id
  type
  name
  symbol
  decimals
  iconUrl
}

fragment KeybanClient_TokenBalance on TokenBalance {
  id
  token {
    id
    ...KeybanClient_TokenContract
  }
  balance
}

fragment KeybanClient_Nft on Nft {
  id
  collection {
    id
    ...KeybanClient_TokenContract
  }
  tokenId
  metadata
}

fragment KeybanClient_NftBalance on NftBalance {
  id
  nft {
    id
    ...KeybanClient_Nft
  }
  balance
}

fragment KeybanClient_Transaction on Transaction {
  id
  blockNumber
  blockHash
  timestamp
  gasUsed
  gasPrice
  fees
  success
}

fragment KeybClient_AssetTransfer on AssetTransfer {
  id
  from {
    id
  }
  to {
    id
  }
  transaction {
    id
    ...KeybanClient_Transaction
  }
  type
  value
  token {
    id
    ...KeybanClient_TokenContract
  }
  nft {
    id
    ...KeybanClient_Nft
  }
}
